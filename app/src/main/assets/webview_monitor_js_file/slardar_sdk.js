!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SlardarHybrid=e()}(this,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Array.prototype.forEach||(Array.prototype.forEach=function(t){var e,n;if(null==this)throw new TypeError("this is null or not defined");var r=Object(this),o=r.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(1<arguments.length&&(e=arguments[1]),n=0;n<o;){var i=void 0;n in r&&(i=r[n],t.call(e,i,n,r)),n++}}),function(){if(!(window.URL&&window.URL.prototype&&"href"in window.URL.prototype)){t.prototype={toString:function(){return this.href},get href(){return this._anchorElement.href},set href(t){this._anchorElement.href=t},get protocol(){return this._anchorElement.protocol},set protocol(t){this._anchorElement.protocol=t},get host(){return this._anchorElement.host},set host(t){this._anchorElement.host=t},get hostname(){return this._anchorElement.hostname},set hostname(t){this._anchorElement.hostname=t},get port(){return this._anchorElement.port},set port(t){this._anchorElement.port=t},get pathname(){return this._anchorElement.pathname},set pathname(t){this._anchorElement.pathname=t},get search(){return this._anchorElement.search},set search(t){this._anchorElement.search=t},get hash(){return this._anchorElement.hash},set hash(t){this._anchorElement.hash=t}};var e=window.URL||window.webkitURL||window.mozURL;t.createObjectURL=function(t){return e.createObjectURL.apply(e,[t])},t.revokeObjectURL=function(t){return e.revokeObjectURL.apply(e,[t])},Object.defineProperty(t.prototype,"toString",{enumerable:!1}),window.URL=t}function t(t,e){if(!t)throw new TypeError("Invalid argument");var n=document.implementation.createHTMLDocument("");if(e){var r=n.createElement("base");r.href=e,n.head.appendChild(r)}var o=n.createElement("a");if(o.href=t,n.body.appendChild(o),":"===o.protocol||!/:/.test(o.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:o})}}(),function(){if(!Element.prototype.addEventListener){var a=[],t=function(t,e){var n=this,r=function(t){t.target=t.srcElement,t.currentTarget=n,void 0!==e.handleEvent?e.handleEvent(t):e.call(n,t)};if("DOMContentLoaded"===t){var o=function(t){"complete"===document.readyState&&r(t)};if(document.attachEvent("onreadystatechange",o),a.push({object:this,type:t,listener:e,wrapper:o}),"complete"===document.readyState){var i=new Event;i.srcElement=window,o(i)}}else this.attachEvent("on"+t,r),a.push({object:this,type:t,listener:e,wrapper:r})},e=function(t,e){for(var n=0;n<a.length;){var r=a[n];if(r.object===this&&r.type===t&&r.listener===e){"DOMContentLoaded"===t?this.detachEvent("onreadystatechange",r.wrapper):this.detachEvent("on"+t,r.wrapper),a.splice(n,1);break}++n}};Element.prototype.addEventListener=t,Element.prototype.removeEventListener=e,HTMLDocument&&!HTMLDocument.prototype.addEventListener&&(HTMLDocument.prototype.addEventListener=t,HTMLDocument.prototype.removeEventListener=e),Window&&!Window.prototype.addEventListener&&(Window.prototype.addEventListener=t,Window.prototype.removeEventListener=e)}}();var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function o(t){return"object"===e(t)&&null!==t&&!s(t)}function i(t){return"function"==typeof t}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(){return!!o(window)}function c(){return!!n()&&!!o(window.performance)}function u(){return!!c()&&!!o(window.performance.timing)}function f(){return!!c()&&!!i(window.performance.getEntries)}function p(){return!!i(requestAnimationFrame)}var t=function(){function t(t){var n=this;this._setupMonitors=function(t){return t.forEach(function(t){t.setup(n._sendEvent)}),t},this._sendEvent=function(t){if(n._transport){var e=n._modifyEvent(t);n._shouldSend(e)&&n._idleSendEvent(e)}else n._sendQueue.push(t)},this._modifyEvent=function(t){return t},this._shouldSend=function(t){return!0},this._getIdle=function(){return i(window.requestIdleCallback)?window.requestIdleCallback:i(setTimeout)?setTimeout:function(t){t()}},this._idleSendEvent=function(t){n._getIdle()(function(){n._send(t)})},this._options=t,this._sendQueue=[],this._monitors=this._setupMonitors(t.defaultMonitors||[])}return t.prototype._send=function(t){},t.prototype.setupTransport=function(t){var e=this;this._transport=t,this._sendQueue.forEach(function(t){e._sendEvent(t)}),this._sendQueue=[]},t}();function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0;r<t.length;)n=l(n,t[r]),r++;return n}function l(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&(o(t[n])&&o(e[n])?l(t[n],e[n]):!o(t[n])&&o(e[n])?t[n]=l({},e[n]):t[n]=e[n]);return t}function m(t,e){if(!s(t))return!1;if(0===t.length)return!1;for(var n=0;n<t.length;){if(t[n]===e)return!0;n++}return!1}function _(t){}function v(t){"complete"!==document.readyState?window.addEventListener("load",function(){setTimeout(function(){t()},0)},!1):t()}function d(t){return s(t)&&t.length?function(t){for(var e,n=[],r=t.length,o=0;o<r;o++){var i=t[o];e=i,"[object String]"===Object.prototype.toString.call(e)?n.push(i.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):i&&i.source&&n.push(i.source)}return new RegExp(n.join("|"),"i")}(t):null}var y={cover:_,accumulate:_,reportDirectly:_,average:_},w=function(){var n=this;this.cover=function(t,e){n.log.cover(t,e)},this.accumulate=function(t,e){n.log.accumulate(t,e)},this.reportDirectly=function(t,e){n.log.reportDirectly(t,e)},this.average=function(t,e){n.log.average(t,e)},this.log=window.jsIESLiveTimingMonitor||y},g=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o._shouldSend=function(t){var e=t.name,n=t.event;if("StaticErrorMonitor"===e){var r=d(o._options.monitors.StaticErrorMonitor.ignore||[]);if(r&&r.test(n.st_url))return!1}return!0},o._modifyEvent=function(t){var e=t.name,n=t.event,r=(n.ev_type,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n}(n,["ev_type"])),o={};return o.event=a({},r),"PerformanceMonitor"===e&&(o.ev_type="performance"),"PerformanceIntervalMonitor"===e&&(o.ev_type="performance_interval"),"StaticErrorMonitor"===e&&(o.ev_type="static_error"),"StaticPerformanceMonitor"===e&&(o.ev_type="static_performance"),"FPSMonitor"===e&&(o.ev_type="fps"),"MemoryMonitor"===e&&(o.ev_type="memory",o.event=a({},r.memory)),a({name:e},o)},o.updateConfig=function(t){o._options=h({},o._options,t)},o}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(t,e),t.prototype.setupTransport=function(){var t=new w;e.prototype.setupTransport.call(this,t)},t.prototype._send=function(t){var e=a({},t,this._options.sendCommonParams);if("performance"===e.ev_type&&this._transport.cover(e,"overview"),"performance_interval"===e.ev_type&&this._transport.reportDirectly(e,"diff"),"static_performance"===e.ev_type&&this._transport.reportDirectly(e,"resource"),"static_error"===e.ev_type){this._transport.reportDirectly(e,"error");var n=a({ev_type:"static_error_count",event:{static_error_count:1}},this._options.sendCommonParams);this._transport.accumulate(n,"overview")}"fps"===e.ev_type&&this._transport.average(e,"performance"),"memory"===e.ev_type&&this._transport.average(e,"performance")},t}(t),E=function(){var i=this;this.name="StaticErrorMonitor",this.setup=function(t){n()&&(i._callback=t,window.addEventListener("error",i._staticErrorLog,!0))},this._getParams=function(t,e){var n={ev_type:"static",st_type:e},r=function(t){var e=document.createElement("a");e.href=t;var n=e.pathname||"/";return"/"!==n[0]&&(n="/"+n),{protocol:e.protocol.slice(0,-1),hostname:e.hostname,host:e.host,pathname:n}}(t);return n.st_url=t,n.st_protocol=r.protocol,n.st_domain=r.hostname,n.st_path=r.pathname,n},this._staticErrorLog=function(t){var e,n=t||window.event||{};try{e=n.target||n.srcElement||{}}catch(n){return}var r=e.src||e.href||"",o=e.tagName&&e.tagName.toLowerCase()||"";r&&o&&r!==window.location.href&&i._callback&&i._callback({name:i.name,type:"get",event:i._getParams(r,o)})}},b=["DOMContentLoaded"],P=function(t){void 0===t&&(t={});var o=this;this.name="PerformanceMonitor",this.setup=function(t){u()&&(o._callback=t,o._sendParams={ev_type:"performance"},v(function(){return o._perfLog()}),o._checkPoint(),o._checkInterval())},this._checkPoint=function(){s(o._options.checkPoint)&&o._options.checkPoint.forEach(function(t){m(b,t)&&window.addEventListener(t,function(){o._perfLog()})})},this._checkInterval=function(){(function(t){return"number"==typeof t})(o._options.interval)&&(o._executor=window.setInterval(function(){var t=!1,e=o._diffPre,n=performance.timing;for(var r in n)0===n[r]||e[r]||(t=!0);t&&(o._perfIntervalLog(),o._diffPre=n)},o._options.interval),v(function(){window.clearInterval(o._executor)}))},this._getParams=function(){if(u()){var t={},e=o._getPaintTime("first-paint"),n=o._getPaintTime("first-contentful-paint");return e&&(t.fp=Math.round(e)),n&&(t.fcp=Math.round(n)),t.navigation=window.performance.timing,t}},this._getPaintTime=function(e){if(f()){var t=performance.getEntriesByType("paint");if(s(t)){var n=t.filter(function(t){return t.name===e});return 0===n.length?0:n[0].startTime}}return 0},this._perfIntervalLog=function(){u()&&(o._sendParams=a({},o._sendParams,o._getParams()),o._callback({name:"PerformanceIntervalMonitor",event:o._sendParams}))},this._perfLog=function(){u()&&(o._sendParams=a({},o._sendParams,o._getParams()),o._callback({name:o.name,event:o._sendParams}))},this._options=t,this._diffPre={}};var S=[],L=function(){var e=this;this.name="StaticPerformanceMonitor",this.setup=function(t){f()&&(e._callback=t,v(function(){return e._sendPerformance()}))},this._sendPerformance=function(){if(f()){var t=e._getParams();e._callback({name:e.name,event:t})}},this._getParams=function(){return{resources:e._getResources()}},this._getResources=function(){return f()?window.performance.getEntriesByType("resource").filter(function(t){return!m(S,t.initiatorType)}):[]}},M=function(){function t(t){this._beginTime=(performance||Date).now(),this._frames=0,this._duration=t,this._currentTime=(performance||Date).now()}return t.prototype.begin=function(){this._currentTime=(performance||Date).now(),this._beginTime=(performance||Date).now(),this._frames=0},t.prototype.end=function(){var t;return this._frames++,this._currentTime=(performance||Date).now(),this._currentTime>=this._beginTime+this._duration&&(t=this._frames*this._duration/(this._currentTime-this._beginTime),this._beginTime=this._currentTime,this._frames=0),t},t}(),T=function(t){var e=this;this.name="FPSMonitor",this.getInterval=function(t){var e=3e3;return t&&t.interval&&3e3<t.interval&&(e=t.interval),e},this.setup=function(t){p()&&(e._fpsInstance=new M(1e3),e._callback=t,e._animateId=0,e._executor=window.setInterval(function(){cancelAnimationFrame(e._animateId),e._start()},e._uploadDuration))},this._start=function(){e._fpsInstance.begin(),e.animate()},this.animate=function(){var t=e._fpsInstance.end();void 0===t?e._animateId=requestAnimationFrame(e.animate):e._callback({name:e.name,type:"post",event:{ev_type:"fps",fps:t}})},this._uploadDuration=this.getInterval(t),this._executor=null,this._fpsInstance=null,this._animateId=0},j=function(){function t(t){var e=this;this.name="MemoryMonitor",this.getInterval=function(t){var e=3e3;return t&&t.interval&&3e3<t.interval&&(e=t.interval),e},this.setup=function(t){c()&&window.performance.memory&&p()&&(e._callback=t,e._executor=window.setInterval(function(){e._start()},e._uploadDuration))},this.animate=function(){var t=window.performance.memory;e._callback({name:e.name,type:"post",event:{ev_type:"memory",memory:{jsHeapSizeLimit:t.jsHeapSizeLimit,totalJSHeapSize:t.totalJSHeapSize,usedJSHeapSize:t.usedJSHeapSize}}})},this._uploadDuration=this.getInterval(t),this._executor=null}return t.prototype._start=function(){this.animate()},t}();var I,O,k=["/log/sentry/"],D=((I=function(){for(var t=new Array(16),e=0,n=void 0;e<16;e++)0==(3&e)&&(n=4294967296*Math.random()),t[e]=n>>>((3&e)<<3)&255;return t}())[6]=15&I[6]|64,I[8]=63&I[8]|128,function(t){for(var e=[],n=0;n<256;++n)e[n]=(n+256).toString(16).substr(1);var r=0,o=e;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}(I)),C=function(){var i=this;this.version="2.0.16",this.instance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t.slice(1);if("config"===n){var o=i._normalizeSetting(r[0]);i._client?i._client.updateConfig(o):i._init(o)}},this._init=function(t){var e=[new E,new P(t.monitors.PerformanceMonitor),new L,new T(t.monitors.FPSMonitor),new j(t.monitors.MemoryMonitor)],n=a({defaultMonitors:e},t);i._client=new g(n),i._client.setupTransport(),i.shared.transport=i._client._transport},this._normalizeSetting=function(t){var e=h(i._baseClientConfig,t);return i._baseClientConfig=e},this._baseClientConfig={sendCommonParams:{version:this.version,navigation_id:D,sampleRate:1,bid:"",pid:""},monitors:{StaticErrorMonitor:{ignore:k},StaticPerformanceMonitor:{slowSession:8e3,sampleRate:.1},FPSMonitor:{interval:5e3},MemoryMonitor:{interval:5e3},PerformanceMonitor:{}}},this._client=void 0,this.shared={transport:this._client?this._client._transport:y}};if(window.SlardarHybrid)O=window.SlardarHybrid;else{var R=new C;(O=R.instance).shared=R.shared,window.SlardarHybrid=O}return O});
